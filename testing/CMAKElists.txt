cmake_minimum_required(VERSION 3.0)

project(tests)

set(GTest_INCLUDE_DIRS "${CMAKE_SOURCE_DIR}/src/googletest/googletest/include")
set(GTest_LIBRARIES 
    "${CMAKE_SOURCE_DIR}/src/googletest/build/lib/libgtest.a"
    "${CMAKE_SOURCE_DIR}/src/googletest/build/lib/libgtest_main.a"
)

set(CMAKE_LIBRARIES_DIR
    "-lws2_32" #  for #include <winsock2.h>
)

set(SOURCES 
    ${CMAKE_SOURCE_DIR}/tests.cpp
    ${CMAKE_SOURCE_DIR}/lightweight_cpp_webserver.cpp
)

include_directories(
    ${CMAKE_SOURCE_DIR}/headers
    ${CMAKE_SOURCE_DIR}/website
    ${GTest_INCLUDE_DIRS}
)

add_executable(tests ${SOURCES})

target_link_libraries(tests PRIVATE ${CMAKE_LIBRARIES_DIR} ${GTest_LIBRARIES})
