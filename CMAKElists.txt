cmake_minimum_required(VERSION 3.10)

project(cpp-webserver)

# Define sources
set(SOURCES
    main.cpp
    src/lightweight_cpp_webserver.cpp
)

set(OPENSSL_INCLUDE_DIR "${CMAKE_SOURCE_DIR}/src/OpenSSL-Win64/include")
set(OPENSSL_LIBRARIES 
    "${CMAKE_SOURCE_DIR}/src/OpenSSL-Win64/lib/VC/x64/MD/libssl.lib"
    "${CMAKE_SOURCE_DIR}/src/OpenSSL-Win64/lib/VC/x64/MD/libcrypto.lib"
)

# Add executable
add_executable(cpp-webserver ${SOURCES})

# Include directories
target_include_directories(cpp-webserver PRIVATE 
    # headers
    # website
    # keys
    "${CMAKE_CURRENT_SOURCE_DIR}/headers"
    "${CMAKE_CURRENT_SOURCE_DIR}/website"
    "${CMAKE_CURRENT_SOURCE_DIR}/keys"
    ${OPENSSL_INCLUDE_DIR}
)

# Link libraries
target_link_libraries(cpp-webserver PRIVATE 
    ${OPENSSL_LIBRARIES}
    Ws2_32 # for #include <winsock.h>
    stdc++ # C++ Standard library, required if your main.cpp has it's #includes in another header
)

set_target_properties(cpp-webserver PROPERTIES 
    RUNTIME_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR} # output .exe to "./"
    OUTPUT_NAME "main" # rename file to main.exe
) 